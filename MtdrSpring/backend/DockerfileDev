FROM openjdk:22-slim
RUN apt-get update && apt-get install -y procps
#COPY pom.xml /tmp/
#COPY src /tmp/src/

# Copy Oracle wallet
RUN mkdir -p /mtdrworkshop/creds
COPY wallet/ /mtdrworkshop/creds

# Copy .env (for spring-dotenv to read)
COPY .env /tmp/.env

WORKDIR /tmp/
EXPOSE 8080

# Copy JAR
COPY target/TomaTask-0.0.1-SNAPSHOT.jar TomaTask.jar

# Environment defaults
ENV ui_username="admin"
ENV ui_password="none0001"

ENV db_user="TOMATITOS"
ENV db_password="TomaDB_TomaTask_admin_1"
ENV db_url="jdbc:oracle:thin:@reacttodouazrb_tp?TNS_ADMIN=/mtdrworkshop/creds"
ENV driver_class_name="oracle.jdbc.OracleDriver"

ENTRYPOINT ["java","-jar","TomaTask.jar"]